# Entity Framework and APIs
[MVC with EF Get Started](https://docs.microsoft.com/en-us/aspnet/core/data/ef-mvc/intro)

[Entity Framework Core](https://docs.microsoft.com/en-us/ef/core/)


1. Entity Framework Core (EF Core) is a lightweight, open-source, and cross-platform version of Entity Framework, which is a data access technology used with .NET applications.

2. EF Core serves as an object-relational mapper (O/RM), allowing .NET developers to work with databases using .NET objects. It eliminates the need for writing most data-access code manually.

3. EF Core supports various database engines, and developers can find more details about supported providers in the "Database Providers" section.

4. Data access in EF Core is performed using a model, which consists of entity classes and a context object representing a session with the database.

5. Developers can create a model using different approaches: generating it from an existing database or hand-coding the model to match the database schema.

6. EF Migrations enable creating a database from the model and allow evolving the database as the model changes over time.

7. Querying data from the database is done using Language Integrated Query (LINQ), which provides a powerful and intuitive way to retrieve data from the entity classes.

8. Saving data involves creating, deleting, and modifying instances of entity classes, and then using the context to save those changes to the database.

9. Best practices for working with EF Core and any O/RM in production apps include having intermediate-level knowledge of the underlying database server, conducting functional and integration testing to catch potential issues, and performing performance and stress testing with representative loads.

10. Security considerations such as handling connection strings and other secrets, proper input validation for raw SQL, and encryption for sensitive data are essential.

11. Logging and diagnostics should be appropriately configured to aid in troubleshooting and monitoring application behavior.

12. Error recovery strategies should be in place to handle common failure scenarios, and application deployment and migration should be planned carefully to minimize downtime and concurrency issues.

13. Migrations, which are used to apply changes to the database schema, should be thoroughly tested before being applied to production data, as some changes may not be easily reversible once data is present.

Overall, Entity Framework Core provides a convenient and powerful way to interact with databases in .NET applications, but developers should be mindful of best practices and considerations to ensure the reliability, performance, and security of their applications.

[Data Seeding](https://docs.microsoft.com/en-us/ef/core/modeling/data-seeding)

Data seeding is the process of populating a database with an initial set of data.

There are three ways to accomplish data seeding in EF Core:

1. Model Seed Data:
   - In EF Core, seed data can be associated with an entity type as part of the model configuration.
   - Migrations automatically compute insert, update, or delete operations needed to apply the seed data when upgrading the database to a new version of the model.
   - Data changes performed outside of migrations might be lost or cause errors during migrations.
   - Primary key values need to be specified even if they are usually generated by the database.
   - Previously seeded data will be removed if the primary key is changed in any way.
   - Model seed data is most useful for static data that is not expected to change outside of migrations and does not depend on anything else in the database.

2. Manual Migration Customization:
   - When a migration is added, the changes specified with `HasData` are transformed to calls to `InsertData()`, `UpdateData()`, and `DeleteData()`.
   - Manual migration customization involves manually adding these calls or custom operations to the migration to work around some limitations of `HasData`.

3. Custom Initialization Logic:
   - A powerful way to perform data seeding is to use `DbContext.SaveChanges()` before the main application logic begins execution.
   - Developers can use this approach to check if certain data already exists in the database before adding it.
   - It allows for more complex seeding scenarios, such as data that depends on the database state, data transformations, calls to external APIs, etc.

Limitations of Model Seed Data:
- Model seed data is managed by migrations, and the script to update existing data must be generated without connecting to the database.
- The primary key value needs to be specified, even if it's usually generated by the database, to detect data changes between migrations.
- Changing the primary key in any way will remove previously seeded data.
- Model seed data is best suited for static data that won't change outside of migrations and does not depend on other database data.

Considerations for Seeding Data:
- For temporary data used in testing, data depending on the database state, large datasets, or requiring complex transformations/API calls, custom initialization logic is recommended.
- For more control over data seeding, custom initialization logic can be used in combination with migrations.

Data seeding is essential for pre-populating databases with initial data, and the choice of approach depends on the type of data, how it may evolve, and the level of control needed during migrations.

[Entity Framework Core](https://docs.microsoft.com/en-us/aspnet/core/data/ef-rp/intro?view=aspnetcore-2.1&tabs=visual-studio)

[User Secrets](https://codefellows.github.io/code-401-dotnet-guide/resources/user-secrets.html)

Videos
[YouTube - Intro to APIs (60 min)](https://youtu.be/aIkpVzqLuhA)